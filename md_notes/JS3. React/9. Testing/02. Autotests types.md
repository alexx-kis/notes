# Виды автотестов

- Современные инструменты автоматизированного тестирования позволяют проверять всё: от вёрстки до сложных пользовательских сценариев
- Давайте разберём виды автотестов, их особенности, и когда какой из них стоит использовать

## Смоук-тесты (Smoke Tests)

- Смоук-тесты — это базовая проверка работоспособности основных функций приложения
- Они предназначены для быстрой оценки, работает ли приложение в принципе

### Примеры смоук-тестов для интернет-магазина:

- Возможность зайти в каталог товаров
- Возможность просмотреть карточку товара
- Возможность оформить заказ
- Проверка отображения информации о доставке

- Смоук-тесты не углубляются в детали, но помогают сразу понять, есть ли критические ошибки
- Они полезны для быстрой проверки, особенно перед релизом

## Иерархия автотестов

- Иерархия автотестов представлена в виде пирамиды, которая разделяет тесты по уровням

```[ Manual Tests ]
            GUI Tests
    Acceptance Tests (Api Layer)
    Unit Tests / Component test
```

## Уровни тестов:

1. Юнит-тестирование (Unit Testing):

   - Тесты проверяют отдельные функции, методы или классы
   - Самый низкий уровень тестирования
   - Покрытие должно быть максимальным, близким к 100%
   - Пример: проверка функции сортировки массива

2. Компонентные тесты:

   - Проверяют работу отдельных компонентов приложения
   - Пример: проверка формы регистрации

3. Интеграционные тесты (Integration Testing):

   - Проверяют взаимодействие нескольких модулей или компонентов
   - Пример: проверка работы формы регистрации с хранилищем данных

4. Системное тестирование (System Testing):

   - Проверяет поведение всего приложения или его больших частей
   - Пример: нагрузочное тестирование при большом числе пользователей

## Инструменты тестирования кода с внешними зависимостями

- При тестировании модуля или функции важно изолировать её от внешних зависимостей. Для этого используются:

1. Моки (Mocks):

   - Имитация функций или методов, которые возвращают данные для тестирования
   - Пример: замена реального вызова базы данных на фиктивный

2. Стабы (Stubs):

   - Заглушки для передачи фейковых данных
   - Пример: фиктивный массив данных, который возвращается из замоканной функции

3. Шпионы (Spies):

   - Анализируют реальное поведение функций (например, подсчитывают вызовы или проверяют переданные параметры)
   - Отличие: не подменяют функции, а только наблюдают за их вызовами

### Пример:

- Для функции сортировки массива, которая вызывает метод получения данных из базы, можно использовать мок
- Мок вернёт фиктивные данные, позволяя протестировать только логику сортировки.

## Методики написания автотестов

1. TDD (Test-Driven Development) — Разработка через тестирование:

   - Тесты пишутся до реализации кода
   - Цель: сначала определить, как должна работать функция, а затем написать её реализацию
   - Преимущества:

     - Предусматриваются пограничные ситуации
     - Код изначально создаётся тестируемым

   - Пример: написать тест для функции сортировки, проверяющий сортировку чисел, строк и пустого массива

2. TLD (Test-Last Development) — Написание тестов после кода:

   - Сначала создаётся функция, затем её покрывают тестами
   - Преимущества:
     - Быстрее можно приступить к реализации
   - Недостатки:
     - Код может оказаться сложным для тестирования

### Выбор подхода:

- TDD лучше подходит для новых функций и сложной логики
- TLD удобнее для небольших, очевидных изменений

## Резюме

- Смоук-тесты проверяют основные функции
- Юнит-тесты — самый низкий уровень, проверяют логику отдельных функций
- Интеграционные тесты проверяют взаимодействие частей приложения
- Системное тестирование охватывает большие сценарии, включая производительность
- Используйте моки, стабы и шпионы для изоляции тестируемого кода
- TDD помогает писать более качественный и тестируемый код, а TLD подходит для доработок
