# Словари. Object и Map

- Словарь — это структура данных, в которой у элементов нет определённого порядка, зато есть название
- Такое название называют ключом
- Доступ к элементам словаря производится по ключу
- В словарь можно добавлять новые элементы и изменять или удалять уже имеющиеся
- Одни и те же элементы могут повторяться по несколько раз, но ключи повторяться не могут

- Самый простой словарь в JS — это объект. Его особенность в том, что все его ключи строковые. Это значит, что в качестве ключа нельзя использовать булево значение или объект (число, кстати, можно, но это другая история).

- Кроме объектов, для создания словарей в JS можно использовать Map (о них мы поговорим позже).

- Словари используются, когда нам нужно сопоставить одни данные с другими. В примере ниже словарь используется для описания логики масштабирования картинки на странице.

        <img src="kitty.jpg">
        <form id="picture-scale">
          <label><input type="radio" name="scale" value="smallest"> Малюсенький</label>
          <label><input type="radio" name="scale" value="small"> Маленький</label>
          <label><input type="radio" name="scale" value="normal" checked> Обычный</label>
          <label><input type="radio" name="scale" value="big"> Большой</label>
        </form>

        const filterValueToScale = {
          'smallest': 0.25,
          'small': 0.5,
          'normal': 1,
          'big': 1.5,
        };

        const form = document.querySelector('#picture-scale');
        const picture = document.querySelector('img');

        form.onchange = () => {

          // Чтобы понять, как задать размер картинки,
          // не нужно писать много условий, достаточно
          // обратиться к словарю и прочитать оттуда
          // какой масштаб соответствует выбранному фильтру

          const value = filterValueToScale[form['scale'].value];
          picture.style.transform = `scale(${value})`;
        };

- Не всегда Object будет идеально работать как словарь
- Есть как минимум, два случая, когда он не подойдёт.
  1. Во-первых, Object не перечисляемый, поэтому, если у вас появится задача написать цикл по объекту, придётся использовать неудобный из-за обязательных лишних проверок for...in вместо модного и красивого for...of
  2. Во-вторых, из-за того, что ключи в объекте могут быть только строковыми, если вы захотите, например, сопоставить один объект с другим, то у вас ничего не выйдет. Для таких случаев в ES2015 появилась конструкция Map

## Map

        const Alyonushka = {
          age: 14,
          gender: 'female',
          name: 'Алёнушка',
          job: 'Сестрица',
        };

        const Ivanushka = {
          age: 12,
          gender: 'male goat',
          name: 'Иванушка',
          job: 'Братец',
        };

        const Bonnie = {
          age: 24,
          gender: 'female',
          name: 'Bonnie Parker',
          job: 'Gangster',
        };

        const Clyde = {
          age: 25,
          gender: 'male',
          name: 'Clyde Barrow',
          job: 'Gangster',
        };

- Map создаётся в JS с помощью конструктора

        let legendaryPairs = new Map();

- Можно добавлять элементы с помощью метода `set`.
- В `set` первым аргументом передаётся ключ, вторым — значение.
- Таким образом мы можем сопоставить, например, два объекта:

        legendaryPairs.set(Alyonushka, Ivanushka);
        legendaryPairs.set(Bonnie, Clyde);

- Другой способ создания `Map` — это создание на основе другой перечисляемой структуры, например, на основе массива массивов

        legendaryPairs = new Map([
          [Alyonushka, Ivanushka],
          [Bonnie, Clyde],
        ]);

- Теперь к элементам словаря можно обращаться, добавлять в словарь новые значения, но самое интересное, что можно их перебирать или с помощью
  встроенного метода `forEach` или с помощью цикла `for..of`.
- Обратите внимание на то, как в примере с `for..of` переменные `first` и `second` создаются с помощью деструктуризации.

        for (const [first, second] of legendaryPairs) {
          console.log(`${first.name} всегда поддержит ${second.name}`);
        }

- WeakMap — это вид Map, так же, как и WeakSet, предназначен для более эффективной работы с памятью. Помещать в WeakMap тоже можно только объекты. На практике используется крайне редко.

- Мы разобрали, что такое словарь, какие способы создать словарь есть в JS и какие задачи подходят для использования словарей. В качестве словарей объекты в JS используются чаще, но там, где не хватает возможностей Object, отлично поможет Map.
