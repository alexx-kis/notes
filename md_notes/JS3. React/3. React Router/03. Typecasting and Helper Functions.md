# Приведение типов и вспомогательные функции TypeScript

## 1. Проблема с универсальными типами (Generics):

- Для работы с разными типами публикаций (Item, Post, MegaPost) можно использовать универсальный тип `T`
- Однако, без ограничений для `T` TypeScript не может гарантировать наличие у `T` свойства `id`

```ts
function printId<T>(post: T): void {
  console.log(post.id); // Ошибка: TS не уверен в наличии свойства id.
}
```

## 2. Решение с использованием объединения типов:

- Отказ от дженериков и применение объединения типов (Item | Post | MegaPost) решает проблему:

```ts
function printId(post: Item | Post | MegaPost): void {
  console.log(post.id); // Ошибки нет, TS знает, что id есть у каждого из типов.
}
```

## 3. Использование ограничения (extends):

- Лучшее решение — ограничение универсального типа, добавляя `extends`
- Это позволяет уточнить, что `T` должен быть совместим с `Item`

```ts
function printId<T extends Item>(post: T): void {
  console.log(post.id);
}
```

- Теперь TypeScript уверен, что у `T` есть свойство `id`.

## 4. Значение по умолчанию для универсальных типов:

- Если не указано значение для `T`, используется тип `Item`:

```ts
function printId<T extends Item = Item>(post: T): void {
  console.log(post.id);
}

printId({ id: '123' }); // OK: тип по умолчанию — Item.
```

## 5. Преобразование типов:

- TypeScript позволяет утверждать тип явно:

  - Угловые скобки: <ТипНазначения>ТипИсточник
  - Оператор as: ТипИсточник as ТипНазначения

#### Пример:

```ts
const firstPost = <SmallPost>posts[0];
const secondPost = posts[1] as BigPost;
```

- Если типы несовместимы, возникает ошибка. Однако, через промежуточный тип any можно обойти это ограничение, что крайне не рекомендуется:

```ts
const what = 5 as any as string; // Работает, но плохо для поддержки.
```

## 6. Функции для манипуляции типами:

- `Omit`: Убирает указанные свойства из типа

```ts
type ShortPost = Omit<BigPost, 'longText'>;
```

- `Pick`: Оставляет только указанные свойства

```ts
type ShortPost = Pick<BigPost, 'title' | 'isPromo'>;
```

- `keyof`: Используется для динамического выбора полей

```ts
type ShortPost = Omit<BigPost, keyof MegaPost>;
```

## 7. Рекомендации:

- Используйте встроенные утилиты TypeScript (Omit, Pick и др.) для работы с типами
- Избегайте неявного приведения типов через `any`
- Изучите внешние библиотеки, такие как TS ToolBelt, для сложных манипуляций с типами.
