# NEXT

(курс по официальной документации nextjs.org)

- next является обёрткой для react-приложений с механизмами server side rendering и статичной генерации страниц
- пре-рендеринг на сервере улучшает производительность
- ssr и ssg улучшает seo (поисковая оптимизация сайте)

# 1. Настройка и установка необходимого окружения

## Создание нового проекта

- рекомендуется использовать `pnpm` в качестве пакетного менеджера, так как он быстрее и более эффективен, чем `npm` или `yarn`
- если `pnpm` не установлен, его можно установить глобально командой

```bash
npm install -g pnpm
```

- чтобы создать Next.js приложение, нужно открыть терминал в папке, в которой необходимо хранить проект, и запустить команду:

```bash
npx create-next-app@latest nextjs-dashboard --example "https://github.com/vercel/next-learn/tree/main/dashboard/starter-example" --use-pnpm
```

- эта команда использует `create-next-app` - интерфейс командной строки (Command Line Interface, CLI), который устанавливает Next.js приложение
- в команде выше также используется флаг `--example` с начальным примером (https://github.com/vercel/next-learn/tree/main/dashboard/starter-example) для этого курса

## Изучение проекта

- в отличие от обучающих материалов, где нужно писать код с нуля, в этом курсе бОльшая часть кода уже написана
- это лучше отражает реальную разработку, где вероятнее придётся работать с существующей кодовой базой

- наша цель - помочь сфокусироваться на изучении главных возможностей Next.js без необходимости писать весь код приложения

- после установки нужно открыть проект в vscode и перейти в `nextjs-dashboard`

```bash
cd nextjs-dashboard
```

## Структура папок

- проект имеет следующую файловую структуру

```
app/ - содержит все маршруты, компоненты и логику для приложения, здесь будет бОльшая часть работы
|- lib/ - содержит функции, используемые в приложении, такие как utils и функции получения данных
|- ui/ - содержит все UI компоненты, такие как карточки, таблицы и формы (они уже стилизованы)
|
public/ - содержит все статичные ресурсы, такие как изображения
next.config.ts - и другие конфигурационные файлы находятся в корневой папке, бОльшая часть этих файлов создаётся и преднастраивается при создании проекта с помощью команды `create-next-app`. в этом курсе не надо будет изменять эти файлы
|...
```

## Данные-заполнители (Placeholder data)

- при создании пользовательских интерфейсов помогает использование каких-то данных-заполнителей
- если база данных или API пока недоступны, можно:

  - использовать данные-заполнители в формате JSON или в качестве JS-объектов
  - использовать сторонние сервисы типа mockAPI (https://mockapi.io/)

- для данного проекта заготовлены данные-заполнители в `app/lib/placeholder-data.ts`
- каждый JS-объект в файле представляет таблицу в базе данных

### пример для таблицы счётов:

```ts
const invoices = [
  {
    customer_id: customers[0].id,
    amount: 15795,
    status: 'pending',
    date: '2022-12-06',
  },
  {
    customer_id: customers[1].id,
    amount: 20348,
    status: 'pending',
    date: '2022-11-14',
  },
  // ...
];
```

- в разделе 6 эти данные будут использоваться для заполнения базы данных (заполнения некоторыми начальными данными)

## TypeScript

- проект написан на TypeScript
- в `/app/lib/definitions.ts` вручную определены типы, которые будут возвращены из базы данных
- например, таблица счётов имеет следующие типы:

```ts
export type Invoice = {
  id: string;
  customer_id: string;
  amount: number;
  date: string;
  // In TypeScript, this is called a string union type.
  // It means that the "status" property can only be one of the two strings: 'pending' or 'paid'.
  status: 'pending' | 'paid';
};
```
- используя TypeScript, можно убедиться, что случайно не передаются данные неправильного формата в компоненты или базу данных

## Запуск сервера для разработки (тестового сервера)

- запустить `pnpm i` для установки зависимостей проекта
- запустить `pnpm dev` для запуска сервера для разработки

- `pnpm dev` запускает сервер для разработки Next.js приложения на порту 3000

- при запуске откроется страница, которая намеренно не стилизована