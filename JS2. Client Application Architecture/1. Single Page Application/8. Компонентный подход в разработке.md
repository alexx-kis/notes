# Компонентный подход в разработке

### Классический подход

- В классических JavaScript-приложениях мы привыкли разделять файлы на HTML и JavaScript, подобные решения в простейшем виде могут выглядеть примерно так:

        <!-- index.html -->
        <h1>Привет, Мир!!! Моё приложение создано: <b class="js-date"></b>.</h1>

        // index.js
        function setDate(date) {
          const nameWrapper = document.querySelector('.js-date');

          if (nameWrapper) {
            nameWrapper.textContent = date || '29.05.2013';
          }
        }

        setDate('13.04.23');

- Такая организация кода удобна для небольших сайтов и виджетов, но когда мы говорим о крупных продуктовых сайтах, то их HTML-страницы обычно состоят из нескольких тысяч элементов
- JavaScript-файл также становится огромным, так как функционала очень много

- Находить нужные элементы в таких «простынях» кода сложно
- К тому же логика JavaScript тесно связана с HTML-разметкой
- При написании JavaScript-кода важно знать, какие элементы есть в разметке, чтобы обращаться к ним через DOM API и изменять
- Но так как HTML и JavaScript находятся в разных файлах, то приходится переключаться между ними
- Всё это делает классический подход с разделением кода на HTML и JavaScript трудоёмким и неудобным для написания современных веб-приложений

- Поэтому сейчас для организации кода в приложении обычно используют компонентный подход

## Компонентный подход

- Компонент — это независимая сущность, которая описывает обособленный кусочек пользовательского интерфейса и содержит в себе весь необходимый код — HTML и JavaScript
- Например, компонентом является кнопка или карточка товара.

- Мы уже говорили о важности модульности в современной архитектуре
- Так вот, компоненты — это и есть те самые модули во Frontend-разработке, на которые можно разбить сложные интерфейсы

- Используя компонентный подход, мы не пытаемся сразу сверстать большую страницу,вместо этого мы разбиваем её на компоненты
- Далее, создав компоненты, мы как из конструктора собираем из них большую HTML-страницу
- Более того, мы можем переиспользовать эти компоненты при создании новых страниц, потому что компоненты независимы

- Независимость подразумевает использование готовых компонентов в любых частях сайта
  -Например, когда создают компонент «кнопка», то учитывают, что он будет работать не только в конкретной части сайта, но и на любой странице, что его можно легко встроить, без необходимости переделывать код

## Практический пример: шапка сайта

Рассмотрим страницу настоящего сайта. Она большая и содержит много функционала. На первый взгляд непонятно, как приступить к разработке такого ресурса.

- Если разрабатывать её как единые HTML- и JavaScript-файлы, то получатся огромные файлы с кодом. В дальнейшем находить и править в них различные баги будет невероятно сложно. Многие элементы повторяются на других страницах сайта, но мы не сможем их переиспользовать. Для других страниц придётся заново создавать эти элементы, дублируя код и ещё больше усложняя приложение.

- Но разрабатывать станет легче, если разбить страницу на небольшие обособленные кусочки интерфейса — компоненты — и создавать их независимо. Например, можно выделить компонент «шапка». Если рассмотреть шапку, то в ней можно увидеть логотип, меню и блок авторизации. В свою очередь, меню может состоять, например, из ряда компонентов MenuItem. Можно и дальше разбивать страницу на более маленькие независимые детали, чтобы было удобно работать.

![alt text](<images/Деление страницы на компоненты.png>)

- В результате шапка сайта — это большой и сложный модуль. Но компонент MenuItem — маленький элемент, не сложнее небольшого виджета, его можно качественно и быстро реализовать, не создавая багов. Дальше из него можно легко собрать компонент Menu. А из меню и других элементов можно собрать шапку. В свою очередь, контентную часть страницы также можно разбить на небольшие компоненты и реализовать их.

- Таким образом, большую и непосильную задачу мы превращаем в набор компонентов, каждый из которых легко реализовать. Далее из маленьких частей несложно собрать большие, и из них создать всю страницу. Всё это делает разработку простой и понятной.

- Обратите внимание на компонент Menu. Все три элемента меню имеют разный текст и иконки, но сам шаблон у них одинаковый. Поэтому мы не рассматриваем их как три разных компонента, а используем для них один компонент MenuItem. В этом состоит суть компонента — это не статический HTML-код, а общий шаблон, в который можно передавать различные опции, например, текст ссылки.

- Не обязательно разбивать на компоненты именно так, как показано в примере. Один и тот же шаблон можно разбить на компоненты по-разному, главное, чтобы вам и коллегам было удобно работать.

## Как делить интерфейс на компоненты

- Прежде чем начать писать код, нужно изучить макет и разбить его на компоненты.

- Деление интерфейса на компоненты — это творческий процесс. Единственно верного варианта или алгоритма разделения макета на компоненты не существует. Но есть рекомендации.

### Цели компонентов

- Чтобы понять, как делить интерфейс на компоненты, важно учесть цели, для которых это делается.

- Можно выделить две цели, для которых кусочки интерфейса выделяют в компоненты:

  1. Переиспользование — компоненты легко переиспользовать на сайте.
  2. Структурирование — компоненты позволяют разделить большой код страницы на мелкие элементы, отвечающие за свою часть функционала. В результате появляется понятная структура файлов, в которой гораздо легче ориентироваться, чем в большой «простыне» кода.

### Признаки компонентов

- Есть несколько принципов, по которым можно выделить элемент интерфейса в отдельный компонент.

  1. Повторение элемента в макетах.

  - Повторяющиеся элементы практически всегда выделяют в отдельный компонент, чтобы в дальнейшем при создании страниц сайта не создавать каждый раз этот элемент, а переиспользовать уже готовый компонент.

  2. В дальнейшем элемент потенциально может переиспользоваться.

     - Сайт — «живой организм». Он постоянно меняется, совершенствуется и развивается. Часто бывает так, что приложение изначально состоит всего из нескольких страниц. Но со временем оно развивается, появляются десятки новых страниц. В результате те элементы, которые изначально казались не повторяющимися и не были вынесены в компоненты, начинают появляться на новых страницах. Поэтому стоит думать о будущем и выносить куски интерфейса в компоненты, даже если сейчас они в макетах не повторяются.

  3. Элемент содержится в UI Kit.

  - Дизайнеры часто сами выделяют те элементы, которые планируют переиспользовать, в отдельный список — UI Kit. Все элементы из UI Kit лучше выносить в отдельные компоненты, ведь дизайнер планирует переиспользовать их в макетах. При выделении элементов в компоненты полезно советоваться с дизайнером, ведь разработчики могут только предполагать, как будут выглядеть другие макеты страниц и что будет переиспользоваться. Дизайнер, создавая новые макеты, точно знает, что он будет использовать.

  4. Логически обособленный элемент интерфейса.

  - Некоторые куски интерфейса могут не повторяться в макетах, но при этом являться логически обособленным модулем. В таких случаях их тоже полезно вынести в отдельный компонент для структурирования.

## Неудачные решения

При разделении на компоненты можно руководствоваться разными подходами, но важно выделить несколько популярных ошибок:

1. Делать компоненты очень большими. Такие компоненты обычно не подходят для переиспользования и их сложно поддерживать. Имеется в виду ситуация, когда создаётся один компонент с крупным куском разметки.

2. Делать компоненты очень маленькими. Это обратная крайность — нарезать интерфейс на слишком маленькие кусочки, например делать компонентом каждый тег. Это бессмысленно, так как многие HTML-элементы несут исключительно техническое значение и не являются обособленной частью интерфейса.

3. Создавать несколько компонентов для одного и того же шаблона. Например, есть две карточки товара — одна для холодильника, другая для телевизора. Они имеют одинаковый шаблон и отличаются только данными. В таком случае создавать компонент ProductFridge и ProductTV может быть неудачным решением. Лучше создать компонент Product и просто передавать туда нужные данные для каждого товара.

### Практический пример: подвал сайта

Рассмотрим подвал сайта HTML Академии:
Такой элемент сайта можно разделить на следующие компоненты:

![alt text](<images/Выделяем компоненты в подвале сайта HTML Академии.png>)

- Сам футер можно выделить в отдельный компонент Footer и в дальнейшем вставлять на каждую страницу.

- Внутри футера можно выделить Logo, которое также может пригодиться в различных частях сайта. SocialIcons — список социальных сетей важен и может быть переиспользован в других частях сайта. SkLogo — логотип «Сколково». Menu — даже если меню не будет переиспользоваться в таком же виде в других частях сайта, его можно выделить в отдельный компонент для структурирования кода футера.

- Menu, в свою очередь, состоит из элементов MenuItem. Каждый элемент MenuItem состоит из заголовка Title и списка ссылок LinkList. Внизу мы выделили компонент Documents, который содержит ссылки на официальные документы. Наконец, в самом низу расположен компонент CopyRight.

- Важно понимать, что это просто один из возможных вариантов разделения интерфейса на компоненты. Можно было, например, не выделять компонент SkLogo, а вставить его в разметку прямо в компонент Footer. Или же можно выделить отдельный компонент Link для ссылок. Всё это не являлось бы ошибкой, просто разные решения, нет одного верного. Не стоит бояться пробовать разные варианты, главное — руководствоваться здравым смыслом и понимать цели, для которых делается разбиение.
