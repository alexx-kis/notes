# Virtual DOM

- Virtual DOM — это паттерн для оптимизации обновления интерфейсов. Это не отдельная технология, а концепция, реализуемая библиотеками и фреймворками. Она позволяет минимизировать работу с реальным DOM, что значительно повышает производительность.

## DOM

- DOM (Document Object Model) — объектная модель документа, с помощью которой можно:

  - Создавать/удалять элементы
  - Изменять их свойства и структуру
  - Пример использования DOM:

```js
const products = ['Соль', 'Сахар', 'Вода'];
const containerElement = document.querySelector('.container');
containerElement.innerHTML = `<ul>
    ${products.map((product) => `<li>${product}</li>`).join('')}
</ul>`;
```

- Этот код отрисует список ингредиентов
- Однако, если потребуется добавить или отредактировать элемент, нужно заново вызывать отрисовку
- Это приводит к полной перерисовке, даже если изменился только один элемент, что неоптимально

## Проблемы обычного DOM

- Частичная перерисовка сложна:

- Можно обновлять DOM точечно с помощью document.createElement() и document.append()
- Это решает проблему в простых случаях, но сложно реализуемо для больших интерфейсов

- Высокая нагрузка на процессор:

  - DOM не проектировался для работы с динамическими интерфейсами
  - Перерисовка сложных интерфейсов быстро снижает производительность

## Что такое Virtual DOM?

- Virtual DOM — это JavaScript-объект, представляющий «облегчённую» копию реального DOM

#### Пример:

```js
const productListVirtualDOM = {
  tagName: 'ul',
  children: [
    { tagName: 'li', textContent: 'Соль' },
    { tagName: 'li', textContent: 'Сахар' },
    { tagName: 'li', textContent: 'Вода' },
  ],
};
```

- Этот объект:

- Хранится в памяти
- Отражает текущее состояние интерфейса
- Обновляется при изменении данных

## Как работает Virtual DOM

- Создание виртуального DOM: При первом рендере создаётся начальная версия Virtual DOM

- Обновление состояния: При изменении данных формируется новая версия Virtual DOM
- Вычисляется разница между новой и старой версиями (diff)

- Обновление реального DOM:

  - Реальный DOM обновляется только там, где обнаружены изменения
  - Это значительно быстрее, чем полная перерисовка

## Преимущества Virtual DOM

1. Снижение нагрузки на процессор:

- Операции с объектами в памяти быстрее, чем работа с DOM-узлами
- Перерисовка откладывается до применения всех изменений

2. Оптимизация изменений:

- Только итоговые изменения переносятся в реальный DOM

## Virtual DOM vs Shadow DOM

- Shadow DOM — это браузерная технология для веб-компонентов:

- Изолирует стили и области видимости
- Реализуется средствами браузера
- Virtual DOM — это концепция, реализуемая JavaScript-библиотеками, такими как React

## Резюме

- Virtual DOM — это способ оптимизировать работу с реальным DOM
- Он минимизирует лишние перерисовки и обеспечивает высокую производительность
- Этот подход используется в популярных библиотеках и фреймворках для сложных интерфейсов
