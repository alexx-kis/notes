# 8.3 Сервер в рамках MVP

- В архитектуре MVP (Model-View-Presenter) взаимодействие между пользователем и приложением происходит следующим образом:

  - **Пользователь взаимодействует с представлением (View):**  
    Представление принимает действия пользователя (например, клик по кнопке) и передает их в презентер (Presenter)

  - **Презентер обрабатывает логику:**  
    Презентер обрабатывает действия пользователя. Если нужно получить или изменить данные, запросы направляются в модель (Model)

  - **Модель управляет данными:**  
    Модель занимается получением, изменением и удалением данных. После изменений она уведомляет все презентеры, которые связаны с ней

  - **Обновление представлений:**  
    После уведомления презентеры инициируют обновление представлений, чтобы они отобразили актуальные данные

## Где писать код для взаимодействия с сервером?

- Первый вариант, который приходит в голову, — размещение кода для взаимодействия с сервером в презентере, поскольку презентер связывает модель и представления

- Однако это не лучший подход, и вот почему:

  - **Проблема с циклом обмена данными:**  
    Если презентер будет напрямую взаимодействовать с сервером и обновлять данные, возникнет необходимость уведомлять модель о каждом изменении. Это может привести к созданию сложных циклов обмена данными между моделью и презентером, что увеличивает сложность кода и ведет к потенциальным ошибкам.

  - **Нарушение логики взаимодействия:**  
    Презентер в архитектуре MVP должен заниматься логикой управления представлением, а не управлением данными напрямую. Взаимодействие с сервером выходит за рамки обязанностей презентера.

## Правильное решение

**Логика взаимодействия с сервером должна находиться в модели.**

- **Модель управляет запросами:**  
  Взаимодействие с сервером (например, получение данных с API) логично разместить в модели. Это обеспечивает четкое разграничение обязанностей: модель отвечает за данные, а презентер — за логику управления представлениями.

- **Гибкость в работе с разными источниками данных:**  
  Модель может работать с несколькими серверами или источниками данных. Взаимодействие с API становится гибким и масштабируемым.

- **Уведомление презентеров:**  
  Когда модель получает или изменяет данные, она уведомляет все презентеры, которые используют эти данные. Презентеры, в свою очередь, обновляют представления, чтобы отобразить изменения пользователю.

- Таким образом, модель управляет всеми взаимодействиями с сервером, и это позволяет поддерживать чистую и понятную логику приложения, сохраняя обязанности каждого компонента
