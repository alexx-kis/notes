# Списки и множества. Array и Set

- Список — это структура данных, в которой элементы расположены в определённом порядке, и этот порядок важен
- Элементы списка пронумерованы, и доступ к отдельным элементам производится только по порядковому номеру
- В список можно добавлять новые элементы, изменять или удалять уже имеющиеся
- Одни и те же элементы могут повторяться по несколько раз, порядок элементов критически важен

- Это описание напоминает массив, но на деле всё немного сложнее
- Массив — это действительно список, и мы используем массивы, чтобы создавать списки в JS
- Однако, кроме массива, в JS есть и другие списки, например: `NodeList`, `HTMLElementsList`, `ClassList`, и объект `arguments`
- Они отличаются набором методов, например, в `ClassList` есть метод `toggle` для работы с классами, а в массивах — `reduce` для преобразования массива в одно значение

- Список стоит выбирать, когда важен порядок элементов

        // Если я буду переходить по этому маршруту
        // из точки в точку в случайном порядке,
        // мой маршрут окажется неоптимальным:
        // все деньги уйдут на бензин, придётся
        // экономить на пасте и лимончелло

        const routePoints = [
            'Genova',
            'Milano',
            'Torino',
            'Como',
            'Lugano',
        ];

- Если порядок не важен, лучше использовать другую структуру

        // Для того, чтобы купить все эти товары,
        // необязательно идти строго по порядку.

        const groceriesToBuy = [
            'Огурцы',
            'Салат',
            'Лук',
            'Булочка',
            'Кунжут',
        ];

        // Если хочется найти какой-то конкретный
        // элемент, придётся или сначала перебрать
        // весь список, чтобы найти его или запоминать
        // номер, что неудобно.

        const itemToFind = 'Лук';
        let itemIndexInList = -1;

        for (let i = 0; i < groceriesToBuy.length; i++) {
            const item = groceriesToBuy[i];
            if (item === itemToFind) {
                console.log(`Да, мне всё-таки нужно купить ${itemToFind}!`);
                itemIndexInList = i;
                break;
            }
        }

        // Если записать покупки в объект, то
        // станет очень удобно проверять, есть
        // ли в списке что-то конкретное.

        const groceriesToBuy = {
            'Огурцы': 2,
            'Салат': 1,
            'Лук': 1,
            'Булочка': 1,
            'Кунжут': 8,
        };

        const howManyOnionsShouldIBuy = groceriesToBuy['Лук'] || 0;
        console.log(howManyOnionsShouldIBuy); // 1

- Часто списки используются там, где не нужно, как в примере выше
- Если рассматривать список покупок, то порядок элементов не важен, у товаров нет номеров
- В таких случаях, вместо списка лучше использовать множество

- Множество состоит из уникальных элементов
- У них нет ключей, доступ к элементам производится по значению
- Главная операция над множеством — проверка наличия элемента

- В ES2015 появилась возможность создать множество с помощью `Set`

## Set

        // Для того, чтобы создать множество,
        // в JS используется конструктор Set

        let groceries = new Set();

        // Множество можно заполнять вручную,
        // добавляя в него элементы по одному

        groceries.add('Огурцы');
        groceries.add('Салат');
        groceries.add('Лук');
        groceries.add('Булочка');
        groceries.add('Кунжут');

        // Однако, гораздо удобней создать множество
        // на основе массива (или другого Iterable
        // объекта, но о них мы с вами поговорим позже).
        // Обратите внимание, что, если в массиве будут
        // повторяющиеся элементы (в списках так делать
        // можно), то в множество попадёт только первое
        // упоминание, последующие будут проигнорированы

        groceries = new Set(['Огурцы', 'Огурцы', 'Салат', 'Лук', 'Булочка', 'Кунжут']);

        // Теперь, когда мы создали множество, мы очень
        // легко, всего за одну операцию (так же как в примере
        // с объектом выше) можем проверить, входит ли в него
        // нужный нам элемент или нет

        if (groceries.has('Пиво')) {
            console.log('Посмотрю сегодня футбол');
        }

## WeakSet

- WeakSet — это вид Set, предназначенный для более эффективной работы с памятью
- WeakSet используется реже, чем Set
- Главное отличие в том, что, если в Set можно помещать любые типы данных — числа, строки, объекты и так далее, то в WeakSet могут быть только объекты
- За счёт этой особенности WeakSet более оптимально работает с памятью
- Это возможно благодаря тому, что объект существует в памяти только до тех пор, пока на него есть ссылки
- Как только ссылки на объект заканчиваются, объект удаляется из памяти и, если такой объект хранился в WeakSet, он также будет автоматически удалён
