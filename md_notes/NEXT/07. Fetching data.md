# Извлечение данных

- теперь после создания и заполнения базы данных обсудим разные способы извлечения данных для приложения и соберём страницу дашборда

## Выбор способа извлечения данных

## API-уровень

- APIs - это промежуточный уровень между приложением и базой данных
- есть несколько случаев, когда использовать API:
    1. если используются сторонние сервисы, которые поставляют API
    2. если данные извлекаются на клиенте, нужно иметь API-уровень, которые работает на сервере, чтобы избежать раскрытия секретов базы данных клиенту

- в Next.js можно создать конечные точки API, используя обработчики маршрута [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)

## Запросы к базе данных

- при разработке full-stack приложения нужно также написать логику для взаимодействия с базой данных
- для традиционных баз данных, таких как Postgres, это можно сделать с помощью SQL или [ORM](https://vercel.com/docs/storage/vercel-postgres/using-an-orm)

- есть несколько случаев, когда нужно использовать запросы к базе данных:
    1. При создании конечных точек API, нужно написать логику, чтобы взаимодействовать с базой данных
    2. Если используются React Server Component (извлечение данных на сервере), можно пропустить API-уровень, и делать запрос к базе данных напрямую без риска раскрытия секретов базы данных клиенту

## Использование серверных компонентов для извлечения данных

- по умолчанию Next.js приложения используют React Server Components
- извлечение данных серверными компонентами - это относительно новый подход и есть несколько преимуществ их использовать:

    1. Серверные компоненты поддерживают промисы, предоставляя решение для асинхронных действий типа извлечения данных в исходном коде. можно использовать `async/await`-синтаксис без необходимость использовать `useEffect`, `useState` или других библиотек, извлекающих данные
    2. Серверные компоненты работают на сервере, поэтому можно хранить дорогостоящие извлечения данных и логику на сервере, отправляя клиенту только результат
    3. Так как серверные компоненты работают на сервере, можно делать запрос к базе данных напрямую без дополнительного API-слоя. это позволяет не писать и поддерживать дополнительный код

